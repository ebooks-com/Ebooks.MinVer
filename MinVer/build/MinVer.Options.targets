<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <PropertyGroup>
    <MSBuildAllProjects Condition="'$(MSBuildAssemblyVersion)' == '' Or '$(MSBuildAssemblyVersion)' &lt; '16.0'">$(MSBuildAllProjects);$(MSBuildThisFileFullPath)</MSBuildAllProjects>
  </PropertyGroup>

  <Target Name="MinVer_GetOptions">
    <ItemGroup>
      <MinVerPropertiesAsEnvVars Include="MinVerBuildMetadata" Condition="'$([System.Environment]::GetEnvironmentVariable(`MinVerBuildMetadata`))' != ''" />
      <MinVerPropertiesAsEnvVars Include="MinVerMajorMinor" Condition="'$([System.Environment]::GetEnvironmentVariable(`MinVerMajorMinor`))' != ''" />
      <MinVerPropertiesAsEnvVars Include="MinVerTagPrefix" Condition="'$([System.Environment]::GetEnvironmentVariable(`MinVerTagPrefix`))' != ''" />
      <MinVerPropertiesAsEnvVars Include="MinVerVerbosity" Condition="'$([System.Environment]::GetEnvironmentVariable(`MinVerVerbosity`))' != ''" />
      <MinVerPropertiesAsEnvVars Include="MinVerVersionOverride" Condition="'$([System.Environment]::GetEnvironmentVariable(`MinVerVersionOverride`))' != ''" />
    </ItemGroup>
    <Error Condition="'@(MinVerPropertiesAsEnvVars)' != ''" Code="MINVER0002" Text="Options specified as environment variables instead of MSBuild properties: @(MinVerPropertiesAsEnvVars->'%(Identity)', ', ')." />
    <PropertyGroup>
      <MINVER_BUILD_METADATA>$([System.Environment]::GetEnvironmentVariable(`MINVER_BUILD_METADATA`))</MINVER_BUILD_METADATA>
      <MINVER_MAJOR_MINOR>$([System.Environment]::GetEnvironmentVariable(`MINVER_MAJOR_MINOR`))</MINVER_MAJOR_MINOR>
      <MINVER_TAG_PREFIX>$([System.Environment]::GetEnvironmentVariable(`MINVER_TAG_PREFIX`))</MINVER_TAG_PREFIX>
      <MINVER_VERBOSITY>$([System.Environment]::GetEnvironmentVariable(`MINVER_VERBOSITY`))</MINVER_VERBOSITY>
      <MINVER_VERSION_OVERRIDE>$([System.Environment]::GetEnvironmentVariable(`MINVER_VERSION_OVERRIDE`))</MINVER_VERSION_OVERRIDE>
    </PropertyGroup>
    <PropertyGroup>
      <MinVerBuildMetadata Condition="'$(MINVER_BUILD_METADATA)' != ''">$(MINVER_BUILD_METADATA)</MinVerBuildMetadata>
      <MinVerMajorMinor Condition="'$(MINVER_MAJOR_MINOR)' != ''">$(MINVER_MAJOR_MINOR)</MinVerMajorMinor>
      <MinVerTagPrefix Condition="'$(MINVER_TAG_PREFIX)' != ''">$(MINVER_TAG_PREFIX)</MinVerTagPrefix>
      <MinVerVerbosity Condition="'$(MINVER_VERBOSITY)' != ''">$(MINVER_VERBOSITY)</MinVerVerbosity>
      <MinVerVersionOverride Condition="'$(MINVER_VERSION_OVERRIDE)' != ''">$(MINVER_VERSION_OVERRIDE)</MinVerVersionOverride>
    </PropertyGroup>
  </Target>

</Project>
